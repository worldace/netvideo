<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title></title>
  <style>
html{
}
body{
    padding: 0;
    margin: 0;
}
#video-player{
    width: 640px;
}
#video-screen{
    background-color: #000;
    width: 100%;
    height: 360px;
    padding: 0;
    margin: 0;
    
}
#video-controller{
    background-color: #aaa;
    width: 100%;
    height: 40px;
    padding: 0;
    margin: 0;
}
#video{
    padding: 0;
    margin: 0;
    position: absolute;
}
</style>

</head>
<body>

<div id="video-player">
<div id="video-screen"><video id="video" loop></video></div>
<div id="video-controller"></div>
</div>

<script>
var $v = {};

document.addEventListener('DOMContentLoaded', function(){

    $v.movie = {};
    $v.movie.url = "1.mp4";

    $v.video      = document.getElementById("video");
    $v.player     = document.getElementById("video-player");
    $v.screen     = document.getElementById("video-screen");
    $v.controller = document.getElementById("video-controller");

    $v.player.width      = $v.player.clientWidth;
    $v.screen.height     = $v.screen.clientHeight;
    $v.controller.height = $v.controller.clientHeight;

});

document.addEventListener('DOMContentLoaded', function(){
    var isFullScreen = false;

    $v.controller.addEventListener('click', function(e){

        if(!$v.movie.width){ return false; }

        if(isFullScreen === false){
            isFullScreen = true;
            $v.player.style.width  = document.documentElement.clientWidth + "px";
            $v.screen.style.height = document.documentElement.clientHeight - $v.controller.height + "px";
            var pos = objectPosition(document.documentElement.clientWidth, document.documentElement.clientHeight - $v.controller.height, $v.movie.width, $v.movie.height);
            $v.video.style.width   = pos.w + "px";
            $v.video.style.height  = pos.h + "px";
            $v.video.style.left    = pos.x + "px";
            $v.video.style.top     = pos.y + "px";
        }
        else{
            isFullScreen = false;
            $v.player.style.width  = $v.player.width + "px";
            $v.screen.style.height = $v.screen.height + "px";
            var pos = objectPosition($v.player.width, $v.screen.height, $v.movie.width, $v.movie.height);
            $v.video.style.width   = pos.w + "px";
            $v.video.style.height  = pos.h + "px";
            $v.video.style.left    = pos.x + "px";
            $v.video.style.top     = pos.y + "px";
        }
    });
    
});

document.addEventListener('DOMContentLoaded', function(){
    $v.video.addEventListener('canplaythrough', function(){
        $v.movie.width    = $v.video.videoWidth;
        $v.movie.height   = $v.video.videoHeight;
        $v.movie.duration = $v.video.duration;
        var pos = objectPosition($v.player.width, $v.screen.height, $v.movie.width, $v.movie.height);
        $v.video.style.width   = pos.w + "px";
        $v.video.style.height  = pos.h + "px";
        $v.video.style.left    = pos.x + "px";
        $v.video.style.top     = pos.y + "px";
        $v.video.play();
    });

    $v.video.src = $v.movie.url;
});


document.addEventListener('DOMContentLoaded', function(){
    $v.video.addEventListener('timeupdate', function(){
        $v.controller.textContent = $v.video.currentTime;
    });
});



function objectPosition(screenW, screenH, objectW, objectH){
    var result = {};
    var marginW = screenW - objectW;
    var marginH = screenH - objectH;
    
    //■オブジェクトのサイズ決め
    //横も縦もはみだす場合 or 横も縦もはみださない場合
    if((marginW >= 0 && marginH >= 0) || (marginW < 0 && marginH < 0)){
        if(marginW < marginH){
            result.w = screenW;
            result.h = screenW / objectW * objectH;
        }
        else{
            result.w = screenH / objectH * objectW;
            result.h = screenH;
        }
    }
    //横がはみでる場合
    else if(marginW < 0){
        result.w = screenW;
        result.h = screenW / objectW * objectH;
    }
    //縦がはみでる場合
    else if(marginH < 0){
        result.w = screenH / objectH * objectW;
        result.h = screenH;
    }
    
    //■オブジェクトの位置決め
    //横ピッタリの場合
    if(screenW == result.w){
        result.x = 0;
        result.y = (screenH / 2) - (result.h / 2);
    }
    //縦ピッタリの場合
    else{
        result.x = (screenW / 2) - (result.w / 2);
        result.y = 0;
    }
    
    result.w = Math.floor(result.w);
    result.h = Math.floor(result.h);
    result.x = Math.floor(result.x);
    result.y = Math.floor(result.y);
    
    return result;
}

</script>





</body>
</html>

